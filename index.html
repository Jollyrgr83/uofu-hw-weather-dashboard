<!DOCTYPE html>
<html lang="en-us">
<head>    
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Weather Dashboard</title>
    <!-- favicon -->
    <!-- <link rel="icon" type="image/png" href="./assets/images/favicon.png"/> -->
    <!-- bootstrap library -->
    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"/>
    <!-- local style sheet -->
    <link rel="stylesheet" type="text/css" href="./assets/css/style.css"/>
</head>
<style>
    body {
        background-color: whitesmoke;
    }
    .top-bar {
        background-color: blue;
        color: white;
        text-align: center;;
        width: 100%;
    }
    .search-container {
        height: 100vw;
        background-color: lightgray;
    }
    .search {
        height: 40px;
    }
    aside {
        margin-left: 0;
    }
    #cityInput {
        width: 150px;
    }
    .search-history {
        box-shadow: 5px 5px 5px lightgray;
        background-color: white;
    }
    .current-weather {
        box-shadow: 5px 5px 5px lightgray;
    }
</style>
<body>
    <header>
        <div class="top-bar p-3">
            <h1>Weather Dashboard</h1>
        </div>
    </header>
    <div class="container m-0">
        <div class="row">
            <!-- search bar -->
            <div class="col-lg-4 search-container">
                <div class="row mt-3 mx-2 mb-1">
                    <label>Search for a City:</label>
                </div>
                <div class="row mx-2">
                    <input type="text" id="cityInput" placeholder="Salt Lake City" class="search p-2"/>
                    <button class="btn btn-primary mx-2 search">Search</button>
                </div>
                <!-- search history -->
                <div class="row mt-3 mx-2 p-2 search-history">Austin</div>
            </div>
            <!-- current weather -->
            <div class="col-lg-8">
                <div class="current-weather p-3">
                    <div class="row">
                        <h2 id="cityName">Atlanta</h2>
                        <h2 id="date">(MM/DD/YYYY)</h2>
                        <img id="icon"/>
                    </div>
                    <div class="row">
                        <div>Temperature: </div> 
                        <div id="temp">##.# F</div>
                    </div>
                    <div class="row">
                        <div>Humidity: </div>
                        <div id="humidity">XX%</div>
                    </div>
                    <div class="row">
                        <div>Wind: </div>
                        <div id="wind">XXX</div>
                    </div>
                    <div class="row">
                        <div>UV Index: </div>
                        <div id="uv">#.##</div>
                    </div>
                </div>
            </div>
            <!-- 5 day forecast -->
            
        
        
        </div>
    </div>
    <!-- jQuery library -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script>
        // Openweather API key = 5f9f4afbfb142ac29ca47b2737de474a
        
        var currentObject;
        var fiveDayObject;
        var uvObject;
        
        if (localStorage.getItem("currentObject") === null) {
            currentObject = {};
        }
        else {
            currentObject = JSON.parse(localStorage.getItem("currentObject"));
        }
        
        if (localStorage.getItem("fiveDayObject") === null) {
            fiveDayObject = {};
        }
        else {
            fiveDayObject = JSON.parse(localStorage.getItem("fiveDayObject"));
        }
        
        if (localStorage.getItem("uvObject") === null) {
            uvObject = {};
        }
        else {
            uvObject = JSON.parse(localStorage.getItem("uvObject"));
        }

        var apiKey = "5f9f4afbfb142ac29ca47b2737de474a";

        var cityName = "Salt Lake City";

        var currentDayQueryURL = "http://api.openweathermap.org/data/2.5/weather?q=" + cityName + "&appid=" + apiKey;
        

        var icon = currentObject.weather["0"].icon;

        var iconURL = "http://openweathermap.org/img/wn/" + icon + "@2x.png";

        $("#cityName").text(currentObject.name);
        $("#date").text(currentObject.dt);
        $("#icon").attr("src", iconURL);
        $("#temp").text(currentObject.main.temp);
        $("#humidity").text(currentObject.main.humidity);
        $("#wind").text(currentObject.wind.speed);

        // current weather
        // $.ajax({
        //     url: currentDayQueryURL,
        //     method: "GET"
        // }).then(function(response) {
        //     console.log("response", response);
        //     currentObject = response;
        //     console.log("currentObject", currentObject);
        //     localStorage.setItem("currentObject", JSON.stringify(currentObject));

        //     var cityLat = currentObject.coord.lat;
        //     console.log("cityLat", cityLat);

        // });


        // var fiveDayQueryURL = "http://api.openweathermap.org/data/2.5/forecast?q=" + cityName + "&appid=" + apiKey;

        // // five day weather
        // $.ajax({
        //     url: fiveDayQueryURL,
        //     method: "GET"
        // }).then(function(response) {
        //     fiveDayObject = response;
        //     localStorage.setItem("fiveDayObject", JSON.stringify(fiveDayObject));
        // });
        
        // var uvQueryURL = "http://api.openweathermap.org/data/2.5/uvi&appid=" + apiKey + "&lat=" + cityLat + "&lon=" + cityLon;
        
        // // uv
        // var cityLat = currentObject.coord.lat;
        // var cityLon = currentObject.coord.lon;
        
        // // uv weather
        // $.ajax({
        //     url: uvQueryURL,
        //     method: "GET"
        // }).then(function(response) {
        //     uvObject = response;
        // });



        // localStorage.setItem("uvObject", JSON.stringify(uvObject));

        // // 5 day
        // var temp = response.list[0].main.temp;
        // var hum = response.list[0].main.humidity;
        // var wind = response.list[0].wind.speed;
        // var icon = response.list[0].weather.icon;
        
        // // current
        // var temp = response.main.temp;
        // var hum = response.main.humidity;
        // var wind = response.wind.speed;


        
        
        // iconURL = "http://openweathermap.org/img/wn/" + icon + "@2x.png";
        
        


        </script>    

    <!-- bootstrap javascript -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <!-- local javascript -->
    <script type="text/javascript" src="./assets/js/script.js"></script>
</body>
</html>